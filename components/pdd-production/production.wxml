<!--components/production.wxml-->

<wxs module="m1">
  var numberToFix= function (value) {
    return value.toFixed(2)
  }
 module.exports.numberToFix=numberToFix;
</wxs>

<view style="display: flex; flex-direction: column;">
  <!-- 商品 -->
  <view class="production" wx:for="{{productions}}" bindtap="clickOnProduction" data-goods_url="{{item.goods_url}}" data-gid="{{item.goods_id}}" data-searchid="{{item.search_id}}" data-production="{{item}}" data-tktype="{{tk_type}}" data-isstype="{{is_stype}}" wx:key="productions">
    <image class="p-left-cover" src="{{item.goods_thumbnail_url}}"  mode="aspectFill"/>
    <view class="p-right-view">
      <view class="p-name">{{item.goods_name}}</view>
      <view class="p-info">
        <text class="p-info-discount" wx:if="{{item.coupon_discount > 0}}">￥{{m1.numberToFix(item.coupon_discount / 100)}}优惠券</text>
        <text class="p-info-sale" wx:if="{{item.sales_tip > 0}}">{{item.sales_tip}}人已买</text>
      </view>
        <view class="p-price">
          <view style="flex-grow: 1;"><text class="p-price1">券后</text><text class="ppre">￥</text><text class="p-price2">{{m1.numberToFix((item.min_group_price - item.coupon_discount) / 100)}}</text>
            <text class="p-price3">￥{{m1.numberToFix(item.min_group_price / 100)}}</text>
          </view>
          <text class="p-lq">查看详情</text>
        </view>
      </view>
    </view>
</view>